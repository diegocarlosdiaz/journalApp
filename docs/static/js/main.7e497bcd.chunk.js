(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{172:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a.n(n),r=a(34),l=a.n(r),o=a(15),s=a(11),i=a(27),u=a(12),m=a(0),d=a.n(m),p=a(2),b=a(7),f=a(21),E=a(63),v=a(25),h=Object(E.a)({apiKey:"AIzaSyCgUYiW78AEisImUIwq2R-CQO1zEhIxfAk",authDomain:"intensivo-react-2022-ccca5.firebaseapp.com",projectId:"intensivo-react-2022-ccca5",storageBucket:"intensivo-react-2022-ccca5.appspot.com",messagingSenderId:"497232842522",appId:"1:497232842522:web:a43cc564c0e552a247e6a3"}),j=Object(v.f)(h),g=new f.a,O="[Auth] Login",y="[Auth] Logout",_="[UI] Set Error",N="[UI] Remove Error",k="[UI] Start Loading",w="[UI] Finish Loading",x="[Notes] New note",C="[Notes] Set active note",S="[Notes] Load notes",I="[Notes] Update note",A="[Notes] Delete note",D=function(e){return{type:_,payload:e}},L=function(){return{type:w}},R=[{code:"auth/email-already-exists",msg:"El email ya se encuentra registrado."},{code:"auth/invalid-email",msg:"El email no es v\xe1lido."},{code:"Firebase: Error (auth/wrong-password).",msg:"La contrase\xf1a es incorrecta."},{code:"Firebase: Error (auth/user-not-found).",msg:"Credenciales inv\xe1lidas"},{code:"Firebase: Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later. (auth/too-many-requests).",msg:"Debido a reiterados intentos fallidos, su cuenta fue inhabilitada temporalmente. Intente m\xe1s tarde"}],U=function(e,t){return function(a){a({type:k}),Object(f.e)(Object(f.c)(),e,t).then((function(e){var t=e.user;a(F(t.uid,t.displayName)),a(L())})).catch((function(e){console.error(e.message),a(L());var t,n=Object(b.a)(R);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.code===e.message&&a(D(c.msg))}}catch(r){n.e(r)}finally{n.f()}}))}},F=function(e,t){return{type:O,payload:{uid:e,displayName:t}}},J=function(){return{type:y}},P=a(5),T=a(13),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(s.a)(t,2),c=a[0],r=a[1],l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r(t)},o=function(e){var t=e.target;r(Object(T.a)(Object(T.a)({},c),{},Object(P.a)({},t.name,t.value)))};return[c,o,l]},z=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})),a=t.loading,n=t.msgError,r=q({email:"prueba@gmail.com",password:"123123"}),l=Object(s.a)(r,2),u=l[0],m=l[1],d=u.email,p=u.password;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"auth__title"},"Iniciar sesi\xf3n"),c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(U(d,p))}},n&&c.a.createElement("div",{className:"auth__alert-error"},n),c.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",value:d,onChange:m}),c.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:p,onChange:m}),c.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:a},"Ingresar"),c.a.createElement("div",{className:"auth__social-networks"},c.a.createElement("p",null,"Ingres\xe1 con tu red social"),c.a.createElement("div",{className:"google-btn",onClick:function(){e((function(e){Object(f.f)(Object(f.c)(),g).then((function(t){var a=t.user;e(F(a.uid,a.displayName))}))}))}},c.a.createElement("div",{className:"google-icon-wrapper"},c.a.createElement("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})),c.a.createElement("p",{className:"btn-text"},c.a.createElement("b",null,"Inici\xe1 sesio\u0144 con google")))),c.a.createElement(i.b,{to:"/Journal-AppReact/auth/register",className:"link"},"Cre\xe1 tu cuenta")))},G=a(64),B=a.n(G),Q=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})).msgError,a=q({name:"Pececito",email:"prueba@gmail.com",password:"123123",password2:"123123"}),n=Object(s.a)(a,2),r=n[0],l=n[1],u=r.name,m=r.email,b=r.password,E=r.password2,v=function(){switch(!0){case 0===u.trim().length:return e(D("Nombre requerido")),!1;case!B.a.isEmail(m):return e(D("Email inv\xe1lido")),!1;case b.length<6:return e(D("La contrase\xf1a debe tener m\xednimo 6 caracteres")),!1;case b!==E:return e(D("Las contrase\xf1as no coinciden")),!1;default:return e({type:N}),!0}};return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"auth__title"},"Registro"),c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),v()&&e(function(e,t,a){return function(n){Object(f.b)(Object(f.c)(),e,t).then(function(){var e=Object(p.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.user,console.log(c),e.next=4,Object(f.h)(c,{displayName:a});case 4:n(F(c.uid,c.displayName));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}}(m,b,u))}},t&&c.a.createElement("div",{className:"auth__alert-error"},t),c.a.createElement("input",{type:"text",placeholder:"Name",name:"name",className:"auth__input",autoComplete:"off",value:u,onChange:l}),c.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",value:m,onChange:l}),c.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:b,onChange:l}),c.a.createElement("input",{type:"password",placeholder:"Confirm password",name:"password2",className:"auth__input",value:E,onChange:l}),c.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block mb-5"},"Registrar"),c.a.createElement(i.b,{to:"/Journal-AppReact/auth/login",className:"link"},"\xbfEst\xe1s registrado/a?")))},X=function(){return c.a.createElement("div",{className:"auth__main"},c.a.createElement("div",{className:"auth__box-container"},c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/login",element:c.a.createElement(z,null)}),c.a.createElement(u.b,{path:"/register",element:c.a.createElement(Q,null)}))))},Y=a(37),K=a.n(Y),M=function(e,t){return{type:C,payload:Object(T.a)({id:e},t)}},V=function(e){return{type:S,payload:e}},W=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a,n){var c,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().auth.uid,delete(r=Object(T.a)({},e)).id,t.prev=3,t.next=6,Object(v.g)(Object(v.d)(j,"".concat(c,"/journal/notes"),e.id),r);case 6:a(H(e.id,e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,a){return t.apply(this,arguments)}}()},H=function(e,t){return{type:I,payload:{id:e,note:t}}},Z=function(e){return{type:A,payload:e}},$=a(42),ee=a.n($),te=(a(171),function(e){var t=e.id,a=e.title,n=e.body,r=e.date,l=e.url,s=Object(o.b)(),i=ee()(r);return c.a.createElement("div",{className:"journal__entry pointer",onClick:function(){s(M(t,{title:a,body:n,date:r,url:l}))}},c.a.createElement("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(l,")")}}),c.a.createElement("div",{className:"journal__entry-body"},c.a.createElement("p",{className:"journal__entry-title"},a),c.a.createElement("p",{className:"journal__entry-content"},n)),c.a.createElement("div",{className:"journal__entry-date-box"},c.a.createElement("span",null,i.format("dddd").charAt(0).toUpperCase()+i.format("dddd").slice(1)),c.a.createElement("h4",null,i.format("D"))))}),ae=function(){var e=Object(o.c)((function(e){return e.notes})).notes;return c.a.createElement("div",{className:"journal__entries"},e.map((function(e){return c.a.createElement(te,Object.assign({key:e.id},e))})))},ne=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})).name;return c.a.createElement("aside",{className:"journal__sidebar"},c.a.createElement("div",{className:"journal__sidebar-navbar"},c.a.createElement("h3",{className:"mt-5"},c.a.createElement("i",{className:"far fa-moon"}),c.a.createElement("span",null,"   ",t)),c.a.createElement("button",{className:"btn",onClick:function(){e((function(e){Object(f.g)(Object(f.c)()).then((function(){e(J())})).catch((function(e){return console.log(e)}))}))}},"Salir")),c.a.createElement("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a().auth.uid,c={title:"",body:"",date:(new Date).getTime()},e.next=5,Object(v.a)(Object(v.b)(j,"".concat(n,"/journal/notes")),c);case 5:r=e.sent,t(M(r.id,c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}())}},c.a.createElement("i",{className:"far fa-calendar-plus fa-5x"}),c.a.createElement("p",{className:"mt-5"},"Nueva nota")),c.a.createElement(ae,null))},ce=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notes})).active;return c.a.createElement("div",{className:"notes__appbar"},c.a.createElement("span",null,"9 de febrero 2022"),c.a.createElement("input",{type:"file",hidden:!0,onChange:function(t){var a=t.target.files[0];a&&e(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a,n){var c,r,l,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().notes.active,"https://api.cloudinary.com/v1_1/rodriiborges/upload",(r=new FormData).append("upload_preset","react-journal"),r.append("file",e),K.a.fire({title:"Subiendo imagen...",text:"Por favor espere",allowOutsideClick:!1,didOpen:function(){K.a.showLoading()}}),t.prev=6,t.next=9,fetch("https://api.cloudinary.com/v1_1/rodriiborges/upload",{method:"POST",body:r});case 9:return l=t.sent,t.next=12,l.json();case 12:o=t.sent,c.url=o.secure_url,a(W(c)),K.a.close(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[6,18]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))},id:"fileSelector",name:"file"}),c.a.createElement("div",null,c.a.createElement("label",{className:"btn",htmlFor:"fileSelector"},"Subir imagen"),c.a.createElement("button",{className:"btn",onClick:function(){e(W(t)),e({type:x,payload:t})}},"Guardar")))},re=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notes})).active,a=Object(n.useRef)(t.id),r=q(t),l=Object(s.a)(r,3),i=l[0],u=l[1],m=l[2],b=i.title,f=i.body;Object(n.useEffect)((function(){t.id!==a.current&&(m(t),a.current=t.id)}),[t,m]),Object(n.useEffect)((function(){e(M(t.id,Object(T.a)({},i)))}),[i,e,t.id]);return c.a.createElement("div",{className:"notes__main-content"},c.a.createElement(ce,null),c.a.createElement("div",{className:"notes__content"},c.a.createElement("input",{type:"text",name:"title",placeholder:"Escribe el t\xedtulo",className:"notes__title-input",autoComplete:"off",value:b,onChange:u}),c.a.createElement("textarea",{name:"body",placeholder:"\xbfQu\xe9 pas\xf3 hoy?",className:"notes__textarea",value:f,onChange:u}),t.url&&c.a.createElement("div",{className:"notes__image"},c.a.createElement("img",{src:t.url,alt:t.id})),c.a.createElement("button",{className:"btn buttons__btn-danger mt-5 pointer",onClick:function(){var a;e((a=t.id,function(){var e=Object(p.a)(d.a.mark((function e(t,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n().auth.uid,e.prev=1,e.next=4,Object(v.c)(Object(v.d)(j,"".concat(c,"/journal/notes"),a));case 4:t(Z(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()))}},"Delete")))},le=function(){return c.a.createElement("div",{className:"nothing__main-content"},c.a.createElement("p",null,"Selecciona algo",c.a.createElement("br",null),"para crear una nota!"),c.a.createElement("i",{className:"far fa-star fa-4x mt-5"}))},oe=function(){var e=Object(o.c)((function(e){return e.notes})).active;return c.a.createElement("div",{className:"journal__main-content"},c.a.createElement(ne,null),c.a.createElement("main",null,e?c.a.createElement(re,null):c.a.createElement(le,null)))},se=function(){var e=Object(o.b)(),t=Object(n.useState)(!0),a=Object(s.a)(t,2),r=a[0],l=a[1],m=Object(n.useState)(!1),b=Object(s.a)(m,2),E=b[0],h=b[1];return Object(n.useEffect)((function(){Object(f.d)(Object(f.c)(),(function(t){(null===t||void 0===t?void 0:t.uid)?(e(F(t.uid,t.displayName)),h(!0),e(function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a().auth.uid,c=[],e.next=5,Object(v.e)(Object(v.b)(j,"".concat(n,"/journal/notes")));case 5:e.sent.forEach((function(e){c.push(Object(T.a)({id:e.id},e.data()))})),t(V(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())):h(!1),l(!1)}))}),[e]),r?c.a.createElement("div",{className:"auth__main"},c.a.createElement("div",{className:"sk-fading-circle"},c.a.createElement("div",{className:"sk-circle1 sk-circle"}),c.a.createElement("div",{className:"sk-circle2 sk-circle"}),c.a.createElement("div",{className:"sk-circle3 sk-circle"}),c.a.createElement("div",{className:"sk-circle4 sk-circle"}),c.a.createElement("div",{className:"sk-circle5 sk-circle"}),c.a.createElement("div",{className:"sk-circle6 sk-circle"}),c.a.createElement("div",{className:"sk-circle7 sk-circle"}),c.a.createElement("div",{className:"sk-circle8 sk-circle"}),c.a.createElement("div",{className:"sk-circle9 sk-circle"}),c.a.createElement("div",{className:"sk-circle10 sk-circle"}),c.a.createElement("div",{className:"sk-circle11 sk-circle"}),c.a.createElement("div",{className:"sk-circle12 sk-circle"}))):c.a.createElement(i.a,null,c.a.createElement("div",null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/Journal-AppReact/auth/*",element:E?c.a.createElement(oe,null):c.a.createElement(X,null)}),c.a.createElement(u.b,{path:"/Journal-AppReact/",element:E?c.a.createElement(oe,null):c.a.createElement("div",{className:"auth__main"},c.a.createElement("div",{className:"auth__box-container"},c.a.createElement(z,null)))}),c.a.createElement(u.b,{path:"/",element:function(){return c.a.createElement(u.a,{to:"/Journal-AppReact/"})}}))))},ie=a(32),ue=a(65),me={loading:!1,msgError:null},de=a(17),pe={notes:[],active:null},be="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ie.c,fe=Object(ie.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{uid:t.payload.uid,name:t.payload.displayName};case y:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(T.a)(Object(T.a)({},e),{},{msgError:t.payload});case N:return Object(T.a)(Object(T.a)({},e),{},{msgError:null});case k:return Object(T.a)(Object(T.a)({},e),{},{loading:!0});case w:return Object(T.a)(Object(T.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(T.a)(Object(T.a)({},e),{},{notes:[].concat(Object(de.a)(e.notes),[t.payload])});case C:return Object(T.a)(Object(T.a)({},e),{},{active:Object(T.a)({},t.payload)});case S:return Object(T.a)(Object(T.a)({},e),{},{notes:Object(de.a)(t.payload)});case I:return Object(T.a)(Object(T.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case A:return Object(T.a)(Object(T.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});default:return e}}}),Ee=Object(ie.d)(fe,be(Object(ie.a)(ue.a))),ve=function(){return c.a.createElement(o.a,{store:Ee},c.a.createElement(se,null))};a(172);l.a.render(c.a.createElement(ve,null),document.getElementById("root"))},67:function(e,t,a){e.exports=a(173)}},[[67,1,2]]]);
//# sourceMappingURL=main.7e497bcd.chunk.js.map